# 🧩 기능 정의서 - AOS-4th Mini Project #2 - Kotlin Chat App

이 문서는 Kotlin + Jetpack Compose 기반 채팅 앱에서 구현할 전체 기능을 구조적으로 정리한 문서입니다. 각 기능은 카테고리별로 나뉘며, ID와 함께 설명됩니다.

---

## 📁 채팅방 관련 기능

| ID   | 기능명                | 설명 |
|------|-----------------------|------|
| F01  | 채팅방 목록 조회       | 사용자가 참여 중인 채팅방 리스트를 조회하여 UI에 출력합니다. |
| F02  | 채팅방 생성           | 채팅방 제목을 입력받아 새로운 채팅방을 생성합니다. |
| F03  | 채팅방 입장           | 채팅방 항목을 클릭하여 메시지 화면으로 이동하고 MQTT topic을 subscribe합니다. |
| F04  | 채팅방 삭제           | 소유자가 해당 채팅방을 삭제할 수 있습니다. |
| F05' | 채팅방 잠금/해제      | 소유자가 채팅방을 잠금하거나 해제할 수 있습니다. 잠금 시 일반 사용자 입장 제한 (선택 기능) |
| F06' | 채팅방 참가자 목록 조회 | 채팅방에 참여 중인 사용자 목록을 출력합니다. (선택 기능) |

---

## 💬 메시지 관련 기능

| ID   | 기능명                | 설명 |
|------|-----------------------|------|
| F07  | 메시지 전송           | 사용자가 입력한 메시지를 MQTT를 통해 발신하고 API/Room에 저장합니다. |
| F08  | 메시지 수신           | MQTT로 수신한 메시지를 Room에 저장하고 LiveData로 UI에 반영합니다. |
| F09  | 메시지 목록 출력      | 채팅방 내 메시지를 시간 순으로 출력합니다. |
| F10  | 시스템 메시지 출력     | 채팅방 생성/입장/퇴장 등 시스템 이벤트 메시지를 표시합니다. |
| F11' | 이미지 메시지 출력     | 이미지 URL을 포함한 메시지를 이미지 카드로 출력합니다. (선택 구현) |

---

## 📡 실시간 기능 (MQTT 기반)

| ID   | 기능명                | 설명 |
|------|-----------------------|------|
| F12  | 입장/퇴장 이벤트 처리  | MQTT로 사용자 입장/퇴장을 실시간으로 브로드캐스팅하고 system 메시지로 출력합니다. |
| F13  | 타이핑 표시           | 특정 사용자가 입력 중일 경우 이를 다른 사용자에게 표시합니다.  |
| F14' | 강퇴 이벤트 처리       | 채팅방 owner가 특정 사용자를 강퇴할 수 있는 이벤트입니다. (선택 기능) |

---

## 🧠 로컬 및 상태관리 기능

| ID   | 기능명                     | 설명 |
|------|----------------------------|------|
| F15  | 메시지 로컬 저장 (Room)     | 수신/발신 메시지를 Room DB에 저장하여 오프라인 시에도 유지합니다. |
| F16' | 읽지 않은 메시지 카운트 표시 | 사용자의 마지막 읽은 시점 이후 수신된 메시지 개수를 계산해 채팅방 목록에 표시합니다. (선택 기능)|
| F17  | LiveData 상태 연동          | Room 데이터를 ViewModel에서 LiveData로 observe하여 Compose UI에 자동 반영합니다. |

---

## ⚙️ 기타 기능

| ID   | 기능명                         | 설명 |
|------|--------------------------------|------|
| F18  | DataStore 사용자 정보 저장 | 앱 시작 시 입력한 sender 이름을 저장하여 재시작 시 유지합니다. |
| F19  | 앱 시작 시 사용자 정보 입력창 표시   | 로그인 없이 사용하기 위해 시작 시 사용자 이름을 받는 입력창을 표시합니다. |
| F20  | 예외 처리                       | MQTT 연결 오류, 메시지 전송 실패, 빈 입력 등 예외 상황에 대한 UI 안내를 제공합니다. |

---

📌 이 정의서를 기반으로 각 기능에 대한 상세 기술 명세서를 다음 단계에서 작성합니다.
